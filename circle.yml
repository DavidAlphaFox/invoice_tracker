machine:
  environment:
    PATH: "$HOME/.asdf/bin:$HOME/.asdf/shims:$PATH"

dependencies:
  cache_directories:
    - ~/.asdf
    - deps
    - _build
  pre:
    - ./scripts/install_elixir.sh
    - mix local.hex --force
    - mix local.rebar --force
  override:
    - yes | mix deps.get
    - mix deps.compile
    - mix compile

test:
  override:
    - mix credo
    - mix dialyzer --halt-exit-status
    - mix test
